!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("AniJS-RWWD");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=function(t){var n="data-anijs",r="default",i="|",o="$",a="if",l="on",s=["do","after","before","to"],f="(\\s+|^)",v="(\\s+|$)",u="animationend",c="transitionend",d="target";t={rootDOMTravelScope:{},notifierCollection:{},init:function(){g._t={};var e=g._a();t.registerHelper(r,e),g._u=r,t.rootDOMTravelScope=document,t.Parser=g.Parser,g._v=g._p(),g._w=""},setDOMRootTravelScope:function(e){var n,r=document;try{"document"===e?n=r:(n=r.querySelector(e),n||(n=r))}catch(i){n=r}t.rootDOMTravelScope=n},run:function(){var e=[],r={};t.purgeAll(),t.notifierCollection={},e=g._o(t.rootDOMTravelScope);var i,o=e.length,a=0;for(a;o>a;a++)i=e[a],r=g._n(i.getAttribute(n)),g._c(i,r);var l=t.getNotifier("AniJSNotifier");l&&l.dispatchEvent("onRunFinished")},createAnimation:function(e,t){var n=t||"";g._c(n,e)},getHelper:function(e){var t=g._t;return t[e]||t[r]},registerHelper:function(e,t){g._t[e]=t},purge:function(e){if(e&&""!==e&&" "!==e){var n=document.querySelectorAll(e),r=n.length,i=0;for(i;r>i;i++)t.EventSystem.purgeEventTarget(n[i])}},purgeAll:function(){t.EventSystem.purgeAll()},purgeEventTarget:function(e){t.EventSystem.purgeEventTarget(e)},setClassNamesWhenAnim:function(e){g._w=" "+e},createNotifier:function(){return t.EventSystem.createEventTarget()},registerNotifier:function(e){var n=t.notifierCollection;return e.id&&e.value&&t.EventSystem.isEventTarget(e.value)?(n[e.id]=e.value,1):""},getNotifier:function(e){return t.notifierCollection[e]}};var g={};return g._a=function(){var e={removeAnim:function(e,t){e.target&&e.type&&t.nodeHelper.removeClass(e.target,t.behavior)},holdAnimClass:function(){},fireOnce:function(e,t){t.eventSystem.removeEventListenerHelper(t.eventTarget,t.event.type,t.listener)},emit:function(e,n,r){var i=r[0]||null,o="";if(null!==i){i=i.split("."),i.length>1?(o=i[0],i=i[1]):(o="",i=i[0]);var a=t.getNotifier(o)||null;null!==a&&a.dispatchEvent(i)}n.hasRunned||n.run()}};return e},g._b=function(){return new Parser},g._c=function(e,t){var n,r,i,o,a=t.length,l=0;for(l;a>l;l++)n=t[l],i=n.after,r=n.before,o=n.behavior,i&&(n.after=g.Parser.parseDoDefinition(i)),r&&(n.before=g.Parser.parseDoDefinition(r)),o&&(n.behavior=g.Parser.parseDoDefinition(o)),g._d(e,n)},g._d=function(e,n){var r,i=g._e(n),o=g._f(e,n);if(n.after&&g.Util._x(n.after)&&(r=n.after[0]),""!==i){var a,l=o.length,s=0;for(s;l>s;s++)if(a=o[s],t.EventSystem.isEventTarget(a)){var f=function(i){var o=g._g(e,n,i),a=g._h(n),l=g._j(e,n),s=g._i(e,n);""!==g._w&&(g.Util._x(a)||(a+=g._w));var v={behaviorTargetList:o,nodeHelper:g.NodeHelper,animationEndEvent:g._v,behavior:a,after:s,eventSystem:t.EventSystem,eventTarget:i.currentTarget,afterFunctionName:r,dataAniJSOwner:e,listener:f,event:i,before:l},u=new t.AnimationContext(v);u.runAll(v)};t.EventSystem.addEventListenerHelper(a,i,f,!1),t.EventSystem.registerEventHandle(a,i,f)}}},g._e=function(e){var t="",n=e.event||t;return n===u?n=g._p():n===c&&(n=g._q()),n},g._f=function(n,r){var i,o=n,a=[o],l=t.rootDOMTravelScope;if(r.eventTarget)if(i=g._notifierHelper(r.eventTarget),i.length>0)a=i;else if("document"===r.eventTarget)a=[document];else if("window"===r.eventTarget)a=[e];else if(r.eventTarget.split)try{a=l.querySelectorAll(r.eventTarget)}catch(s){a=[]}return a},g._g=function(e,n,r){var i=e,a=[i],l=t.rootDOMTravelScope,s=n.behaviorTarget;if(s)if(g.Util._x(s)){var f=this._y(e,n,s);f&&g.Util.isFunction(f[0])&&(a=f[0](r,{dataAniJSOwner:e},g._z(f)))}else if(s===d&&r.currentTarget)a=[r.currentTarget];else{s=s.split(o).join(",");try{a=l.querySelectorAll(s)}catch(v){a=[]}}return a},g._h=function(e){return this._y({},e,e.behavior)},g._i=function(e,t){var n=t.after;return g.Util._x(n)?this._y(e,t,n):g._k(e,t,n)},g._j=function(e,t){var n=t.before;return g.Util._x(n)?this._y(e,t,n):g._k(e,t,n)},g._y=function(e,t,n){var r,i=n||"";return g.Util._x(i)&&(r=g._k(e,t,i[0]),r?i[0]=r:i=i.join(" ")),i},g._k=function(e,t,n){var r=n||"",i=g._l(t);if(r&&!g.Util.isFunction(r)){var o=g._t,a=o[i];r=a&&g.Util.isFunction(a[r])?a[r]:!1}return r},g._l=function(e){var t=e.helper||g._u;return t},g._notifierHelper=function(e){var n=[];if(t.notifierCollection,e)if(e.id&&t.EventSystem.isEventTarget(e.value))n.push(e.value),t.registerNotifier(e);else if(e.split){notifierIDList=e.split("$");var r,i=notifierIDList.length,o=1;for(o;i>o;o++)if(r=notifierIDList[o],r&&" "!==r){r=r.trim();var a=t.getNotifier(r);a||(a=t.EventSystem.createEventTarget(),t.registerNotifier({id:r,value:a})),n.push(a)}}return n},g._z=function(e){for(var t=[],n=e.length;n-->1;)t[n-1]=e[n];return t},g._n=function(e){return g.Parser.parse(e)},g._o=function(e){var t="["+n+"]";return e.querySelectorAll(t)},g._p=function(){var e=g._r(),t=[u,"oAnimationEnd",u,"webkitAnimationEnd"];return t[e]},g._q=function(){var e=g._r(),t=[c,"oTransitionEnd",c,"webkitTransitionEnd"];return t[e]},g._r=function(){for(var e=document.createElement("fe"),t="Animation",n=["animation","O"+t,"Moz"+t,"webkit"+t],r=0;r<n.length;r++)if(void 0!==e.style[n[r]])return r},t.AnimationContext=function(e){var n=this;n.init=function(e){n.behaviorTargetList=e.behaviorTargetList||[],n.nodeHelper=e.nodeHelper,n.animationEndEvent=e.animationEndEvent,n.behavior=e.behavior,n.after=e.after,n.eventSystem=e.eventSystem,n.eventTarget=e.eventTarget,n.afterFunctionName=e.afterFunctionName,n.dataAniJSOwner=e.dataAniJSOwner,n.listener=e.listener,n.event=e.event,n.before=e.before},n.doDefaultAction=function(e,t){var r,i=n,o=i.nodeHelper,a=i.animationEndEvent,l=i.after,s=i.afterFunctionName;i.eventSystem.addEventListenerHelper(e,a,function(e){e.stopPropagation(),i.eventSystem.removeEventListenerHelper(e.target,e.type,arguments.callee),l&&(g.Util.isFunction(l)?l(e,n):g.Util._x(l)&&l[0](e,n,g._z(l)))}),"holdAnimClass"!==s&&"$holdAnimClass"!==s&&(r=e._ajLastBehavior,r&&o.removeClass(e,r),e._ajLastBehavior=t),e.offsetWidth=e.offsetWidth,o.addClass(e,t)},n.doFunctionAction=function(e,t){var r=n,i=r.after,o={target:e};t[0](o,n,g._z(t)),g.Util.isFunction(i)?i(o,n):g.Util._x(i)&&i[0](o,n,g._z(i))},n.runAll=function(){var e,r,i=n,o=i.behaviorTargetList,a=o.length,l=(i.behavior,0),s=i.before,f=n.event;for(l;a>l;l++)r={behaviorTargetList:[o[l]],nodeHelper:n.nodeHelper,animationEndEvent:n.animationEndEvent,behavior:n.behavior,after:n.after,eventSystem:n.eventSystem,eventTarget:n.eventTarget,afterFunctionName:n.afterFunctionName,dataAniJSOwner:n.dataAniJSOwner,listener:n.listener,event:f},e=new t.AnimationContext(r),s?g.Util.isFunction(s)?s(f,e):g.Util._x(s)&&s[0](f,e,g._z(s)):e.run()},n.run=function(){var e=n,t=e.behavior,r=e.behaviorTargetList[0];n.hasRunned=1,g.Util._x(t)?e.doFunctionAction(r,t):e.doDefaultAction(r,t)},n.init(e)},g.Parser={parse:function(e){return this.parseDeclaration(e)},parseDeclaration:function(e){var t,n,r=[];t=e.split(";");var i=t.length,o=0;for(o;i>o;o++)n=this.parseSentence(t[o]),r.push(n);return r},parseSentence:function(e){var t,n,r={};t=e.split(",");var i=t.length,o=0;for(o;i>o;o++)n=this.parseDefinition(t[o]),r[n.key]=n.value;return r},parseDefinition:function(e){var t,n,r,i={},o="event",f="eventTarget",v=["behavior","after","before","behaviorTarget"];if(t=e.split(":"),t.length>1){if(n=t[0].trim(),t.length>2?(r=t.slice(1),r=r.join(":"),r=r.trim()):r=t[1].trim(),i.value=r,n===a)n=o;else if(n===l)n=f;else for(var u=s.length-1;u>=0;u--)n===s[u]&&(n=v[u],"after"!==n&&"before"!==n||"$"===r[0]||(r="$"+r),r=this.parseDoDefinition(r));i.key=n,i.value=r}return i},parseDoDefinition:function(e){var t=/^\$(\w+)\s*/g,n=t.exec(e),r="",o=1;if(null!==n){r=n[1],doDefinitionArray=e.split(n[0])[1],doDefinitionArray=null!==doDefinitionArray?doDefinitionArray.split(i):[],e=[],e[0]=r;for(var a=0;a<doDefinitionArray.length;a++)""!==doDefinitionArray[a]&&(e[o++]=doDefinitionArray[a].trim());return e}return e}},g.NodeHelper={addClass:function(e,t){t instanceof Array||(t=t.split(" "));for(var n=0,r=t.length;r>n;++n)t[n]&&!new RegExp(f+t[n]+v).test(e.className)&&(e.className=""===e.className?t[n]:e.className.trim()+" "+t[n])},removeClass:function(e,t){t instanceof Array||(t=t.split(" "));for(var n=0,r=t.length;r>n;++n)e.className=e.className.replace(new RegExp(f+t[n]+v)," ").trim()},hasClass:function(e,t){return t&&new RegExp(f+t+v).test(e.className)}},g.Util={isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_x:function(e){return Array.isArray(e)}},t.EventSystem={eventCollection:{},eventIdCounter:0,isEventTarget:function(e){return e.addEventListener?1:0},createEventTarget:function(){return new t.EventTarget},addEventListenerHelper:function(e,t,n){e.addEventListener(t,n,!1)},removeEventListenerHelper:function(e,t,n){e&&e.removeEventListener(t,n)},purgeAll:function(){var e,t,n=this,r=n.eventCollection,i=Object.keys(r),o=i.length,a=0;for(a;o>a;a++)e=i[a],t=r[e],t&&t.handleCollection&&t.handleCollection.length>0&&n.purgeEventTarget(t.handleCollection[0].element),delete r[e]},purgeAllNodes:function(e){var t=e.querySelectorAll("*");size=t.length;for(var n=size-1;n>=0;n--)this.purgeEventTarget(t[n])},purgeEventTarget:function(e){var t,n=this,r=e._aniJSEventID;if(r){t=n.eventCollection[r].handleCollection;var i,o=t.length,a=0;for(a;o>a;a++)i=t[a],n.removeEventListenerHelper(e,i.eventType,i.listener);n.eventCollection[r]=e._aniJSEventID=null,delete n.eventCollection[r],delete e._aniJSEventID}},registerEventHandle:function(e,t,n){var r=this,i=e._aniJSEventID,o=r.eventCollection,a={eventType:t,listener:n,element:e};if(i)o[i].handleCollection.push(a);else{var l={handleCollection:[a]};o[++r.eventIdCounter]=l,e._aniJSEventID=r.eventIdCounter}}},t.EventTarget=function(){this._listeners={}},t.EventTarget.prototype={constructor:t.EventTarget,addEventListener:function(e,t){var n=this;"undefined"==typeof n._listeners[e]&&(n._listeners[e]=[]),n._listeners[e].push(t)},dispatchEvent:function(e){var t=this;if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("error");if(this._listeners[e.type]instanceof Array)for(var n=t._listeners[e.type],r=0,i=n.length;i>r;r++)n[r].call(t,e)},removeEventListener:function(e,t){var n=this;if(n._listeners[e]instanceof Array)for(var r=n._listeners[e],i=0,o=r.length;o>i;i++)if(r[i]===t){r.splice(i,1);break}}},t}(n||{});return n.init(),n.run(),"function"==typeof define&&define.amd&&define("anijs",[],function(){return n}),"undefined"==typeof t&&(e.AniJS=n),n});